import{S as J,C as q,P as K,W as Q,O as X,M as V,a as G,b as N,B as Y,L as Z,c as _,V as H,d as R}from"./OrbitControls-.js";let w,f,h,r,v,u,C,S,t=Math.PI/2,s=Math.PI/4,o=.5,a=2.5,b=0,F=0;const L=9.8;let l=1,n=1;const g=1,d=1;let m=[],p;const ee=200;document.getElementById("reset-btn").addEventListener("click",()=>{t=Math.PI/2,s=Math.PI/4,o=.5,a=2.5,b=0,F=0,m=[],p.geometry.setFromPoints(m),p.geometry.attributes.position.needsUpdate=!0});document.getElementById("apply-velocities").addEventListener("click",()=>{const e=parseFloat(document.getElementById("vel1-input").value),i=parseFloat(document.getElementById("vel2-input").value);isNaN(e)||(o=e),isNaN(i)||(a=i)});const W=document.getElementById("mass1"),k=document.getElementById("mass2"),E=document.getElementById("mass1-value"),I=document.getElementById("mass2-value");W&&W.addEventListener("input",e=>{l=parseFloat(e.target.value),E&&(E.textContent=`${l} kg`)});k&&k.addEventListener("input",e=>{n=parseFloat(e.target.value),I&&(I.textContent=`${n} kg`)});te();U();function te(){w=new J,w.background=new q(1710638),f=new K(75,window.innerWidth/window.innerHeight,.1,100),f.position.set(0,0,5),h=new Q({canvas:document.getElementById("three-canvas"),antialias:!0}),h.setSize(window.innerWidth,window.innerHeight),h.setPixelRatio(window.devicePixelRatio),r=new X(f,h.domElement),r.enableDamping=!0,r.dampingFactor=.05,r.screenSpacePanning=!1,r.maxPolarAngle=Math.PI/2,C=new V({color:9169405}),S=new V({color:16742854});const e=new G(.05,.05,g,32);e.translate(0,-g/2,0),v=new N(e,C),w.add(v);const i=new G(.05,.05,d,32);i.translate(0,-d/2,0),u=new N(i,S),v.add(u),u.position.set(0,-g,0);const c=new Y().setFromPoints([]),y=new Z({color:16711680,linewidth:2});p=new _(c,y),w.add(p),window.addEventListener("resize",onWindowResize),E&&(E.textContent=`${W.value} kg`),I&&(I.textContent=`${k.value} kg`)}function U(){requestAnimationFrame(U);const e=-L*(2*l+n)*Math.sin(t),i=-n*L*Math.sin(t-2*s),c=-2*Math.sin(t-s)*n,y=a*a*d+o*o*g*Math.cos(t-s),x=g*(2*l+n-n*Math.cos(2*t-2*s));b=(e+i+c*y)/x;const z=2*Math.sin(t-s),B=o*o*g*(l+n),A=L*(l+n)*Math.cos(t),O=a*a*d*n*Math.cos(t-s),T=d*(2*l+n-n*Math.cos(2*t-2*s));F=z*(B+A+O)/T;const M=.0167;o+=b*M,a+=F*M,o*=.999999,a*=.999999;const P=5;o=R.clamp(o,-P,P),a=R.clamp(a,-P,P),t+=o*M,s+=a*M,v.rotation.z=t,u.rotation.z=s-t,$(v,C),$(u,S);const j=new H(0,-d,0),D=u.localToWorld(j.clone());m.push(D.clone()),m.length>ee&&m.shift(),p.geometry.setFromPoints(m),p.geometry.attributes.position.needsUpdate=!0,r.update(),h.render(w,f)}function $(e,i){const c=new H;e.getWorldPosition(c);const x=(c.project(f).y+1)/2,B=new q().setHSL(x*4%1,.65,.5);i.color.copy(B)}
