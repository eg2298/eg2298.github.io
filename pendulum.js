import"./modulepreload-polyfill-.js";import{S as Z,C as q,b as _,W as ee,d as te,f as H,g as V,M as G,h as ne,i as oe,j as ae,k as ie,V as D,l as N}from"./OrbitControls-.js";let M,u,g,w,x,f,W,z,t=Math.PI/2,i=Math.PI/4,o=.5,a=2.5,A=0,F=0;const k=9.8;let m=1,n=1;const h=1,p=1;let l=[],s;const T=750,se=1;let U=0;document.getElementById("reset-btn").addEventListener("click",()=>{t=Math.PI/2,i=Math.PI/4,o=.5,a=2.5,A=0,F=0,l=[],s&&s.geometry&&s.geometry.attributes.position&&(s.geometry.attributes.position.array.fill(0),s.geometry.attributes.position.needsUpdate=!0,s.geometry.setDrawRange(0,0))});document.getElementById("apply-velocities").addEventListener("click",()=>{const e=parseFloat(document.getElementById("vel1-input").value),r=parseFloat(document.getElementById("vel2-input").value);isNaN(e)||(o=e),isNaN(r)||(a=r)});const b=document.getElementById("mass1"),B=document.getElementById("mass2"),y=document.getElementById("mass1-value"),v=document.getElementById("mass2-value");b&&b.addEventListener("input",e=>{m=parseFloat(e.target.value),y&&(y.textContent=`${m} kg`)});B&&B.addEventListener("input",e=>{n=parseFloat(e.target.value),v&&(v.textContent=`${n} kg`)});re();O();function re(){M=new Z,M.background=new q(1710638),u=new _(75,window.innerWidth/window.innerHeight,.1,100),u.position.set(0,0,5),g=new ee({canvas:document.getElementById("three-canvas"),antialias:!0}),g.setSize(window.innerWidth,window.innerHeight),g.setPixelRatio(window.devicePixelRatio),w=new te(u,g.domElement),w.enableDamping=!0,w.dampingFactor=.05,w.screenSpacePanning=!1,w.maxPolarAngle=Math.PI/2,W=new H({color:9169405}),z=new H({color:16742854});const e=new V(.05,.05,h,32);e.translate(0,-h/2,0),x=new G(e,W),M.add(x);const r=new V(.05,.05,p,32);r.translate(0,-p/2,0),f=new G(r,z),x.add(f),f.position.set(0,-h,0);const d=new ne;d.setAttribute("position",new oe(new Float32Array(T*3),3));const P=new ae({color:16711680,linewidth:2});s=new ie(d,P),M.add(s),window.addEventListener("resize",le),y&&(y.textContent=`${b.value} kg`),v&&(v.textContent=`${B.value} kg`)}function O(){requestAnimationFrame(O);const e=-k*(2*m+n)*Math.sin(t),r=-n*k*Math.sin(t-2*i),d=-2*Math.sin(t-i)*n,P=a*a*p+o*o*h*Math.cos(t-i),C=h*(2*m+n-n*Math.cos(2*t-2*i));A=(e+r+d*P)/C;const R=2*Math.sin(t-i),L=o*o*h*(m+n),J=k*(m+n)*Math.cos(t),K=a*a*p*n*Math.cos(t-i),Q=p*(2*m+n-n*Math.cos(2*t-2*i));F=R*(L+J+K)/Q;const E=.0167;o+=A*E,a+=F*E,o*=.999999,a*=.999999;const I=5;if(o=N.clamp(o,-I,I),a=N.clamp(a,-I,I),t+=o*E,i+=a*E,x.rotation.z=t,f.rotation.z=i-t,j(x,W),j(f,z),U++,U%se===0){const X=new D(0,-p,0),Y=f.localToWorld(X.clone());l.push(Y.clone()),l.length>T&&l.shift();const $=s.geometry.attributes.position,S=$.array;for(let c=0;c<l.length;c++)S[c*3]=l[c].x,S[c*3+1]=l[c].y,S[c*3+2]=l[c].z;$.needsUpdate=!0,s.geometry.setDrawRange(0,l.length)}w.update(),g.render(M,u)}function j(e,r){const d=new D;e.getWorldPosition(d);const C=(d.project(u).y+1)/2,L=new q().setHSL(C*4%1,.65,.5);r.color.copy(L)}function le(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight)}window.onload=function(){y&&(y.textContent=`${b.value} kg`),v&&(v.textContent=`${B.value} kg`)};
