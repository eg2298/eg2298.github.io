import"./modulepreload-polyfill.js";import{S as _,C as q,b as ee,W as te,c as ne,e as A,f as D,M as H,g as oe,h as ae,L as ie,i as se,V as T,j as V}from"./OrbitControls.js";let M,u,w,g,x,f,k,F,t=Math.PI/2,s=Math.PI/4,n=.5,o=2.5,z=0,R=0;const W=9.8;let m=1,a=1;const y=1,p=1;let l=[],i;const O=750,re=1;let G=0;const N=document.getElementById("vel1-display"),U=document.getElementById("vel2-display");document.getElementById("reset-btn").addEventListener("click",()=>{t=Math.PI/2,s=Math.PI/4,n=.5,o=2.5,z=0,R=0,l=[],i&&i.geometry&&i.geometry.attributes.position&&(i.geometry.attributes.position.array.fill(0),i.geometry.attributes.position.needsUpdate=!0,i.geometry.setDrawRange(0,0))});document.getElementById("apply-velocities").addEventListener("click",()=>{const e=parseFloat(document.getElementById("vel1-input").value),r=parseFloat(document.getElementById("vel2-input").value);isNaN(e)||(n=e),isNaN(r)||(o=r)});const B=document.getElementById("mass1"),C=document.getElementById("mass2"),h=document.getElementById("mass1-value"),v=document.getElementById("mass2-value");B&&B.addEventListener("input",e=>{m=parseFloat(e.target.value),h&&(h.textContent=`${m} kg`)});C&&C.addEventListener("input",e=>{a=parseFloat(e.target.value),v&&(v.textContent=`${a} kg`)});le();J();function le(){M=new _,M.background=new q(1710638),u=new ee(75,window.innerWidth/window.innerHeight,.1,100),u.position.set(0,0,5),w=new te({canvas:document.getElementById("three-canvas"),antialias:!0}),w.setSize(window.innerWidth,window.innerHeight),w.setPixelRatio(window.devicePixelRatio),g=new ne(u,w.domElement),g.enableDamping=!0,g.dampingFactor=.05,g.screenSpacePanning=!1,g.maxPolarAngle=Math.PI/2,k=new A({color:9169405}),F=new A({color:16742854});const e=new D(.05,.05,y,32);e.translate(0,-y/2,0),x=new H(e,k),M.add(x);const r=new D(.05,.05,p,32);r.translate(0,-p/2,0),f=new H(r,F),x.add(f),f.position.set(0,-y,0);const d=new oe;d.setAttribute("position",new ae(new Float32Array(O*3),3));const E=new ie({color:16711680,linewidth:2});i=new se(d,E),M.add(i),window.addEventListener("resize",ce),h&&(h.textContent=`${B.value} kg`),v&&(v.textContent=`${C.value} kg`)}function J(){requestAnimationFrame(J);const e=-W*(2*m+a)*Math.sin(t),r=-a*W*Math.sin(t-2*s),d=-2*Math.sin(t-s)*a,E=o*o*p+n*n*y*Math.cos(t-s),b=y*(2*m+a-a*Math.cos(2*t-2*s));z=(e+r+d*E)/b;const $=2*Math.sin(t-s),L=n*n*y*(m+a),K=W*(m+a)*Math.cos(t),Q=o*o*p*a*Math.cos(t-s),X=p*(2*m+a-a*Math.cos(2*t-2*s));R=$*(L+K+Q)/X;const I=.0167;n+=z*I,o+=R*I,n*=.999999,o*=.999999;const P=5;if(n=V.clamp(n,-P,P),o=V.clamp(o,-P,P),t+=n*I,s+=o*I,x.rotation.z=t,f.rotation.z=s-t,j(x,k),j(f,F),N&&(N.textContent=n.toFixed(2)),U&&(U.textContent=o.toFixed(2)),G++,G%re===0){const Y=new T(0,-p,0),Z=f.localToWorld(Y.clone());l.push(Z.clone()),l.length>O&&l.shift();const S=i.geometry.attributes.position.array;for(let c=0;c<l.length;c++)S[c*3]=l[c].x,S[c*3+1]=l[c].y,S[c*3+2]=l[c].z;i.geometry.attributes.position.needsUpdate=!0,i.geometry.setDrawRange(0,l.length)}g.update(),w.render(M,u)}function j(e,r){const d=new T;e.getWorldPosition(d);const b=(d.project(u).y+1)/2,L=new q().setHSL(b*4%1,.65,.5);r.color.copy(L)}function ce(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight)}window.onload=function(){h&&(h.textContent=`${B.value} kg`),v&&(v.textContent=`${C.value} kg`)};
